<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <meta name="renderer" content="webkit">
  <meta http-equiv="X-UA-Compatible" content="IE=edge" >
  <link rel="dns-prefetch" href="http://www.0daybug.com">
  <title>å´å“è¯šçš„æŠ€æœ¯åšå®¢</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="å¸Œæœ›é€šè¿‡è¿™ä¸ªåšå®¢ï¼Œèƒ½å¤Ÿå°†è‡ªå·±çš„å­¦ä¹ æˆæœæ€»ç»“å‡ºæ¥ï¼Œä¸å¤§å®¶åˆ†äº«äº¤æµã€‚">
<meta property="og:type" content="website">
<meta property="og:title" content="å´å“è¯šçš„æŠ€æœ¯åšå®¢">
<meta property="og:url" content="http://www.0daybug.com/page/3/index.html">
<meta property="og:site_name" content="å´å“è¯šçš„æŠ€æœ¯åšå®¢">
<meta property="og:description" content="å¸Œæœ›é€šè¿‡è¿™ä¸ªåšå®¢ï¼Œèƒ½å¤Ÿå°†è‡ªå·±çš„å­¦ä¹ æˆæœæ€»ç»“å‡ºæ¥ï¼Œä¸å¤§å®¶åˆ†äº«äº¤æµã€‚">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="å´å“è¯šçš„æŠ€æœ¯åšå®¢">
<meta name="twitter:description" content="å¸Œæœ›é€šè¿‡è¿™ä¸ªåšå®¢ï¼Œèƒ½å¤Ÿå°†è‡ªå·±çš„å­¦ä¹ æˆæœæ€»ç»“å‡ºæ¥ï¼Œä¸å¤§å®¶åˆ†äº«äº¤æµã€‚">
  
    <link rel="alternative" href="/atom.xml" title="å´å“è¯šçš„æŠ€æœ¯åšå®¢" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/main.css">
  

</head>

<body>
  <div id="container">
    <div class="left-col">
      <div class="overlay"></div>
<div class="intrude-less">
	<header id="header" class="inner">
		<a href="/" class="profilepic">
			
			<img src="/images/avatar.jpg" class="js-avatar">
			
		</a>

		<hgroup>
		  <h1 class="header-author"><a href="/">å´å“è¯š</a></h1>
		</hgroup>

		
		<p class="header-subtitle">è®°å½•ç‚¹æ»´ç å†œç”Ÿæ´»</p>
		

		<nav class="header-menu">
			<ul>
			
				<li><a href="/">ä¸»é¡µ</a></li>
	        
				<li><a href="/tags/éšç¬”">éšç¬”</a></li>
	        
			</ul>
		</nav>
		<nav class="header-smart-menu">
	        
    		
    			
    			<a class="js-smart-menu" data-idx="0" href="javascript:void(0)">æ‰€æœ‰æ–‡ç« </a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="1" href="javascript:void(0)">æ ‡ç­¾</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="2" href="javascript:void(0)">å‹é“¾</a>
    			
    			
            
    			
    			<a class="js-smart-menu" data-idx="3" href="javascript:void(0)">å…³äºæˆ‘</a>
    			
    			
            
		</nav>
		<nav class="header-nav">
			<div class="social">
				
					<a class="github" target="_blank" href="https://github.com/xiaopin" title="github">github</a>
		        
					<a class="weibo" target="_blank" href="http://weibo.com/u/2637356434" title="weibo">weibo</a>
		        
			</div>
		</nav>
	</header>		
</div>

    </div>
    <div class="mid-col">
      <nav id="mobile-nav">
  	<div class="overlay">
  		<div class="slider-trigger"><i class="icon-list"></i></div>
  		<h1 class="header-author js-mobile-header hide">å´å“è¯š</h1>
  	</div>
	<div class="intrude-less">
		<header id="header" class="inner">
			<div class="profilepic">
				
					<img src="/images/avatar.jpg" class="js-avatar">
				
			</div>
			<hgroup>
			  <h1 class="header-author">å´å“è¯š</h1>
			</hgroup>
			
			<p class="header-subtitle">è®°å½•ç‚¹æ»´ç å†œç”Ÿæ´»</p>
			
			<nav class="header-menu">
				<ul>
				
					<li><a href="/">ä¸»é¡µ</a></li>
		        
					<li><a href="/tags/éšç¬”">éšç¬”</a></li>
		        
				</ul>
			</nav>
			<nav class="header-nav">
				<div class="social">
					
						<a class="github" target="_blank" href="https://github.com/xiaopin" title="github">github</a>
			        
						<a class="weibo" target="_blank" href="http://weibo.com/u/2637356434" title="weibo">weibo</a>
			        
				</div>
			</nav>
		</header>				
	</div>
</nav>

      <div class="body-wrap">
        
  
    <article id="post-UIColor2UIImage" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/12/14/UIColor2UIImage/">UIColorè½¬UIImage</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æ²¡å•¥å¥½è¯´çš„ï¼Œç›´æ¥çœ‹ä»£ç </p>
<p>â¬‡â¬‡â¬‡â¬‡â¬‡â¬‡â¬‡â¬‡â¬‡â¬‡</p>
<h3 id="hå¤´æ–‡ä»¶"><a href="#hå¤´æ–‡ä»¶" class="headerlink" title=".hå¤´æ–‡ä»¶"></a>.hå¤´æ–‡ä»¶</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">UIImage</span> (<span class="title">Color</span>)</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  å°†UIColorè½¬æ¢ä¸ºUIImageä¸”å¤§å°ä¸º1x1</div><div class="line"> *</div><div class="line"> *  @param color å›¾ç‰‡é¢œè‰²</div><div class="line"> *</div><div class="line"> *  @return UIImage</div><div class="line"> */</div><div class="line">+ (<span class="keyword">nullable</span> <span class="keyword">instancetype</span>)imageWithColor:(<span class="built_in">UIColor</span> * _Nonnull)color;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  å°†UIColorè½¬æ¢ä¸ºUIImageå¹¶æŒ‡å®šå¤§å°</div><div class="line"> *</div><div class="line"> *  @param color å›¾ç‰‡é¢œè‰²</div><div class="line"> *  @param size  å›¾ç‰‡å¤§å°</div><div class="line"> *</div><div class="line"> *  @return UIImage</div><div class="line"> */</div><div class="line">+ (<span class="keyword">nullable</span> <span class="keyword">instancetype</span>)imageWithColor:(<span class="built_in">UIColor</span> * _Nonnull)color size:(<span class="built_in">CGSize</span>)size;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<h3 id="mæ–‡ä»¶"><a href="#mæ–‡ä»¶" class="headerlink" title=".mæ–‡ä»¶"></a>.mæ–‡ä»¶</h3><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UIImage</span> (<span class="title">Color</span>)</span></div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  å°†UIColorè½¬æ¢ä¸ºUIImageä¸”å¤§å°ä¸º1x1</div><div class="line"> *</div><div class="line"> *  @param color å›¾ç‰‡é¢œè‰²</div><div class="line"> *</div><div class="line"> *  @return UIImage</div><div class="line"> */</div><div class="line">+ (<span class="keyword">instancetype</span>)imageWithColor:(<span class="built_in">UIColor</span> *)color &#123;</div><div class="line">    <span class="keyword">return</span> [<span class="keyword">self</span> imageWithColor:color size:<span class="built_in">CGSizeMake</span>(<span class="number">1.0</span>, <span class="number">1.0</span>)];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">/**</span></div><div class="line"> *  å°†UIColorè½¬æ¢ä¸ºUIImageå¹¶æŒ‡å®šå¤§å°</div><div class="line"> *</div><div class="line"> *  @param color å›¾ç‰‡é¢œè‰²</div><div class="line"> *  @param size  å›¾ç‰‡å¤§å°</div><div class="line"> *</div><div class="line"> *  @return UIImage</div><div class="line"> */</div><div class="line">+ (<span class="keyword">instancetype</span>)imageWithColor:(<span class="built_in">UIColor</span> *)color size:(<span class="built_in">CGSize</span>)size &#123;</div><div class="line">    <span class="built_in">UIGraphicsBeginImageContext</span>(size);</div><div class="line">    <span class="built_in">CGContextRef</span> context = <span class="built_in">UIGraphicsGetCurrentContext</span>();</div><div class="line">    <span class="built_in">CGContextSetFillColorWithColor</span>(context, color.CGColor);</div><div class="line">    <span class="built_in">CGContextFillRect</span>(context, (<span class="built_in">CGRect</span>)&#123;<span class="built_in">CGPointZero</span>, size&#125;);</div><div class="line">    <span class="built_in">UIImage</span> *image = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</div><div class="line">    <span class="built_in">UIGraphicsEndImageContext</span>();</div><div class="line">    <span class="keyword">return</span> image;</div><div class="line">&#125;</div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/12/14/UIColor2UIImage/" class="archive-article-date">
  	<time datetime="2017-12-14T09:13:23.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-12-14</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-UITextView-return-character" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/17/UITextView-return-character/">UITextViewç¦ç”¨å›è½¦ç¬¦</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ€è¿‘é¡¹ç›®æœ‰ä¸ªéœ€æ±‚ï¼Œéœ€è¦åœ¨UITextViewä¸­ç¦æ­¢ç”¨æˆ·è¾“å…¥å›è½¦ç¬¦ï¼Œå› ä¸ºåå°ä¸ä¼šè¿‡æ»¤å›è½¦ç¬¦å·ï¼Œæ‰€ä»¥å½“AFNetworkingè¯·æ±‚æ•°æ®æ—¶ï¼Œå¦‚æœè¿”å›çš„æ•°æ®ä¸­åŒ…å«äº†å›è½¦ç¬¦ï¼Œé‚£ä¹ˆJSONè§£æå°†ä¼šå¤±è´¥ã€‚æ—¢ç„¶åå°ä¸å¤„ç†ï¼Œé‚£æ²¡åŠæ³•ï¼Œåªèƒ½åœ¨UITextViewä¸Šç¦ç”¨å›è½¦ç¬¦äº†ã€‚</p>
<p>æˆ‘ä»¬éœ€è¦è§£å†³ä»¥ä¸‹é—®é¢˜ï¼š</p>
<ol>
<li>ç¦æ­¢é€šè¿‡é”®ç›˜çš„<code>return</code>é”®è¾“å…¥å›è½¦ç¬¦</li>
<li>ç²˜è´´æ–‡æœ¬æ—¶è¿‡æ»¤æ‰æ–‡æœ¬ä¸­çš„å›è½¦ç¬¦</li>
</ol>
<p>å¯¹äºé—®é¢˜1ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡é‡å†™<code>- (void)insertText:(NSString *)text</code>æ–¹æ³•ï¼Œåˆ¤æ–­textæ˜¯å¦ä¸º<code>\n</code>å³å¯ï¼›<br>å¯¹äºé—®é¢˜2ï¼Œå½“ç”¨æˆ·ç‚¹å‡»PasteæŒ‰é’®æ—¶ï¼Œç³»ç»Ÿä¼šè°ƒç”¨UITextViewçš„<code>- (void)paste:(id)sender</code>æ–¹æ³•ï¼Œæˆ‘ä»¬å¯ä»¥ä»æ­¤å¤„ä¸‹æ‰‹ã€‚</p>
<p>ä¸‹é¢é™„ä¸Šç¤ºä¾‹ä»£ç </p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">XPTextView</span> : <span class="title">UITextView</span></span></div><div class="line"></div><div class="line"><span class="comment">/// æ˜¯å¦ç¦ç”¨å›è½¦ç¬¦</span></div><div class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>, <span class="keyword">assign</span>, <span class="keyword">getter</span>=isDisableReturnCharacter) <span class="built_in">BOOL</span> disableReturnCharacter;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div><div class="line"></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">XPTextView</span></span></div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)insertText:(<span class="built_in">NSString</span> *)text &#123;</div><div class="line">    <span class="keyword">if</span> (_disableReturnCharacter &amp;&amp; [text isEqualToString:<span class="string">@"\n"</span>]) &#123;</div><div class="line">        <span class="comment">// ç¦æ­¢è¾“å…¥å›è½¦ç¬¦</span></div><div class="line">        [<span class="keyword">self</span> resignFirstResponder];</div><div class="line">        <span class="keyword">return</span>;</div><div class="line">    &#125;</div><div class="line">    [<span class="keyword">super</span> insertText:text];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)paste:(<span class="keyword">id</span>)sender &#123;</div><div class="line">    <span class="keyword">if</span> (_disableReturnCharacter) &#123;</div><div class="line">        <span class="built_in">NSString</span> *text = [[<span class="built_in">UIPasteboard</span> generalPasteboard] string];</div><div class="line">        <span class="keyword">if</span> ([text containsString:<span class="string">@"\n"</span>]) &#123;</div><div class="line">            <span class="comment">// éœ€è¦ä»ç²˜è´´çš„å­—ç¬¦ä¸²ä¸­æŠŠå›è½¦ç¬¦è¿‡æ»¤æ‰</span></div><div class="line">            text = [[text componentsSeparatedByString:<span class="string">@"\n"</span>] componentsJoinedByString:<span class="string">@""</span>];</div><div class="line">            [<span class="keyword">self</span> replaceRange:<span class="keyword">self</span>.selectedTextRange withText:text];</div><div class="line">            <span class="keyword">return</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    [<span class="keyword">super</span> paste:sender];</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">@end</span></div></pre></td></tr></table></figure>
<p>ä¸‹é¢å®‰åˆ©ä¸€ä¸‹æˆ‘å†™çš„<code>XPTextView</code>ï¼Œä¸ä»…å¯ä»¥ç¦ç”¨å›è½¦ç¬¦ï¼Œè¿˜å¯ä»¥è®¾ç½®å ä½å­—ç¬¦ï¼š</p>
<p><a href="https://github.com/xiaopin/XPTextView.git" target="_blank" rel="external">ğŸ‘‰æºç æˆ³è¿™é‡ŒğŸ‘ˆ</a></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/11/17/UITextView-return-character/" class="archive-article-date">
  	<time datetime="2017-11-17T08:40:36.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-11-17</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-iOS-IB-DESIGNABLE-Caton" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/11/07/iOS-IB-DESIGNABLE-Caton/">IB_DESIGNABLEå¼•èµ·Xcodeç¼–å†™ä»£ç æ—¶å¼‚å¸¸å¡é¡¿</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ€è¿‘å‡çº§äº†Xcode9ä¹‹åï¼Œå‘ç°Xcodeç»å¸¸æ€§å¡é¡¿ï¼ŒèŠèŠ±å¸¸ç°ï¼Œå·²ç»ä¸¥é‡å½±å“åˆ°ä»£ç çš„ç¼–å†™äº†ï¼Œä¸€å¼€å§‹è¿˜ä»¥ä¸ºæ˜¯Xcode9çš„é—®é¢˜ï¼Œåæ¥åœ¨ç½‘ä¸Šæœç´¢äº†ä¸‹ï¼ŒåŸæ¥è€ç‰ˆæœ¬çš„Xcodeå°±å­˜åœ¨è¿™ä¸ªé—®é¢˜ï¼Œè€Œä¸”æ˜¯ç”±äº<code>IB_DESIGNABLE</code>è¿™ä¸ªç³»ç»Ÿå®å¯¼è‡´çš„ã€‚</p>
<p>å½“æˆ‘ä»¬åœ¨è‡ªå®šä¹‰è§†å›¾çš„å®šä¹‰å‰é¢ç”¨äº†<code>IB_DESIGNABLE</code>è¿™ä¸ªå®æ¥ä¿®é¥°ï¼Œå°±è¡¨æ˜äº†æˆ‘ä»¬è¿™ä¸ªè§†å›¾æ˜¯å¯ä»¥åœ¨SB/XIBä¸­å®æ—¶é¢„è§ˆçš„ï¼Œæœ¬æ¥è¿™æ˜¯ä¸€ä¸ªå¾ˆå¥½ç”¨çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬ç›´æ¥ä¿®æ”¹äº†è§†å›¾ä»£ç å°±å¯ä»¥åœ¨SBä¸Šç›´æ¥æ¸²æŸ“å‡ºæ¥ï¼Œè¿™çœŸæ˜¯æ‰€è§å³æ‰€å¾—ï¼Œç®€ç›´æ£’åˆ°æ²¡æœ‹å‹ã€‚ä½†æ˜¯è¿™åŠŸèƒ½ç¡®å®ä¹Ÿå‘äº†æˆ‘ä»¬ä¸€æŠŠï¼Œå½“æˆ‘ä»¬åœ¨ç¼–å†™ä»£ç æ—¶ï¼Œåªè¦ä¿®æ”¹äº†æºç ï¼Œå“ªæ€•åªæ•²äº†ä¸€ä¸ªå­—ç¬¦ï¼ŒXcodeä¹Ÿä¼šè‡ªåŠ¨é‡æ–°ç¼–è¯‘SBæ–‡ä»¶ï¼Œè¿™å°±å¾ˆå°´å°¬äº†ï¼Œå½“æˆ‘ä»¬ä¸æ–­æ•²ä»£ç çš„æ—¶å€™ï¼ŒXcodeå°±ä¸æ–­åœ°é‡æ–°ç¼–è¯‘SBæ–‡ä»¶ï¼Œæœ€åå¯¼è‡´Xcodeå¼‚å¸¸å¡é¡¿ã€‚</p>
<p>æ‰€ä»¥è¦è§£å†³è¿™ä¸ªå¡é¡¿é—®é¢˜ï¼Œæœ‰ä¸¤ä¸ªæ–¹æ¡ˆï¼š</p>
<ul>
<li>è‡ªå®šä¹‰è§†å›¾å»æ‰<code>IB_DESIGNABLE</code>å®ä¿®é¥°ï¼›</li>
<li>å‘Šè¯‰Xcodeä¸è‡ªåŠ¨ç¼–è¯‘SBæ–‡ä»¶ï¼Œé€‰ä¸­é¡¹ç›®çš„SBæ–‡ä»¶ï¼ŒæŠŠ<code>Editor</code> -&gt; <code>Automatically Refresh Views</code>èœå•é¡¹çš„å‹¾å»æ‰å³å¯ã€‚</li>
</ul>
<p><del>ä½†æ˜¯æˆ‘ä¹‹å‰ç”¨Xcode8çš„æ—¶å€™å°±æ²¡å‘ç°å¡é¡¿ç°è±¡å•Šï¼ŒçœŸæ˜¯å¤Ÿå‘çš„</del></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/11/07/iOS-IB-DESIGNABLE-Caton/" class="archive-article-date">
  	<time datetime="2017-11-07T03:05:52.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-11-07</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-UITableViewCell-copy-menu" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/10/26/UITableViewCell-copy-menu/">UITableViewCellé•¿æŒ‰æ‹·è´èœå•é€‰é¡¹</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>è¿è¥æ¨å¹¿äººå‘˜å‘æˆ‘ä»¬åé¦ˆè¯´éœ€è¦ä¸€ä¸ªèƒ½æ–¹ä¾¿æ‹·è´ä¼šå‘˜æ‰‹æœºå·ç çš„åŠŸèƒ½ï¼Œæ–¹ä¾¿è¿›è¡Œå…¶ä»–æ“ä½œã€‚ç”±äºä¼šå‘˜ä¿¡æ¯æ˜¯é‡‡ç”¨UITableViewæ¥è¿›è¡Œå±•ç¤ºçš„ï¼Œè€Œç³»ç»Ÿå·²ç»ä¸ºæˆ‘ä»¬å‡†å¤‡å¥½äº†UITableViewCellé•¿æŒ‰åŠŸèƒ½èœå•çš„APIï¼Œæˆ‘ä»¬åªéœ€å®ç°å¯¹åº”çš„ä»£ç†æ–¹æ³•å³å¯ã€‚</p>
</blockquote>
<p>è¦å®ç°è¯¥åŠŸèƒ½ï¼Œä¸»è¦æ­¥éª¤ä¸ºï¼š</p>
<ul>
<li>éµå®ˆ<code>UITableViewDelegate</code>åè®®ï¼›</li>
<li>å®ç°<code>- (BOOL)tableView:(UITableView *)tableView shouldShowMenuForRowAtIndexPath:(NSIndexPath *)indexPath</code>æ–¹æ³•å¹¶è¿”å›YESï¼›</li>
<li>å®ç°<code>- (BOOL)tableView:(UITableView *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(nullable id)sender</code>æ–¹æ³•ï¼Œæ ¹æ®actionå†³å®šå¯¹åº”çš„èœå•æŒ‰é’®æ˜¯å¦éœ€è¦æ˜¾ç¤ºï¼›</li>
<li>å®ç°<code>- (void)tableView:(UITableView *)tableView performAction:(SEL)action forRowAtIndexPath:(NSIndexPath *)indexPath withSender:(nullable id)sender</code>æ–¹æ³•ï¼Œæ ¹æ®actionåˆ¤æ–­ç”¨æˆ·åšå‡ºäº†ä»€ä¹ˆæ“ä½œã€‚</li>
</ul>
<p>å…·ä½“å®ç°ä»£ç ï¼š<br><figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">- (<span class="built_in">BOOL</span>)tableView:(<span class="built_in">UITableView</span> *)tableView shouldShowMenuForRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath &#123;</div><div class="line">    <span class="keyword">return</span> (indexPath.section == <span class="number">1</span> &amp;&amp; indexPath.row == <span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="built_in">BOOL</span>)tableView:(<span class="built_in">UITableView</span> *)tableView canPerformAction:(SEL)action forRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath withSender:(<span class="keyword">id</span>)sender &#123;</div><div class="line">    <span class="keyword">if</span> (indexPath.section == <span class="number">1</span> &amp;&amp; indexPath.row == <span class="number">0</span> &amp;&amp; action == <span class="keyword">@selector</span>(<span class="keyword">copy</span>:)) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">YES</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> <span class="literal">NO</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)tableView:(<span class="built_in">UITableView</span> *)tableView performAction:(SEL)action forRowAtIndexPath:(<span class="built_in">NSIndexPath</span> *)indexPath withSender:(<span class="keyword">id</span>)sender &#123;</div><div class="line">    <span class="keyword">if</span> (action == <span class="keyword">@selector</span>(<span class="keyword">copy</span>:)) &#123;</div><div class="line">        [[<span class="built_in">UIPasteboard</span> generalPasteboard] setString:<span class="string">@"éœ€è¦æ‹·è´çš„å†…å®¹"</span>];</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æœ€åæ¥ä¸€å¼ æ•ˆæœå›¾:</p>
<p><img src="/images/201710/UITableViewCell-copy.png" alt="æ•ˆæœå›¾"></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/10/26/UITableViewCell-copy-menu/" class="archive-article-date">
  	<time datetime="2017-10-26T01:14:05.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-10-26</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-iOS-NSPhotoLibraryAddUsageDescription" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/10/09/iOS-NSPhotoLibraryAddUsageDescription/">iOS11ä¿å­˜å›¾ç‰‡åº”ç”¨é—ªé€€</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ä»Šå¤©äº§å“ç»ç†å‘æˆ‘åé¦ˆåœ¨iOS11ä¸Šç‚¹å‡»ä¿å­˜å›¾ç‰‡åAppé—ªé€€äº†ï¼Œé€šè¿‡è°ƒè¯•å‘ç°æ§åˆ¶å°è¾“å‡ºäº†å¦‚ä¸‹é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[access] This app has crashed because it attempted to access privacy-sensitive data without a usage description.  The app&apos;s Info.plist must contain an NSPhotoLibraryAddUsageDescription key with a string value explaining to the user how the app uses this data.</div></pre></td></tr></table></figure>
<p>æ ¹æ®æ§åˆ¶å°è¾“å‡ºçš„é”™è¯¯æ—¥å¿—ï¼Œå·²ç»å¾ˆæ˜ç¡®çŸ¥é“åŸå› æ‰€åœ¨äº†ï¼Œé‚£å°±æ˜¯Info.plistä¸­ç¼ºå°‘äº†ä¸€ä¸ª<code>NSPhotoLibraryAddUsageDescription</code>çš„é”®å€¼å¯¹ã€‚æ‰“å¼€Info.plistï¼Œç‚¹å‡»<code>+</code>æ·»åŠ ä¸€ä¸ªé”®å€¼å¯¹ï¼Œåœ¨Keyä¸­è¾“å…¥<code>Privacy - Photo Library Additions Usage Description</code>ï¼ŒValueç±»å‹ä¸º<code>String</code>å¹¶è¾“å…¥ç›¸åº”çš„æç¤ºè¯­å³å¯ã€‚</p>
<p>ä½ ä¹Ÿå¯ä»¥ç›´æ¥ä»¥<code>Source Code</code>æ–¹å¼æ‰“å¼€Info.plistæ–‡ä»¶ï¼Œç„¶åå¤åˆ¶ä»¥ä¸‹å†…å®¹å¹¶ç²˜è´´åˆ°Info.plistä¸­ï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">&lt;key&gt;NSPhotoLibraryAddUsageDescription&lt;/key&gt;</div><div class="line">&lt;string&gt;æ­¤Appéœ€è¦æ‚¨çš„æˆæƒæ‰èƒ½ä¿å­˜å›¾ç‰‡&lt;/string&gt;</div></pre></td></tr></table></figure></p>
<p>iOS11ä¸­æ–°å¢äº†ä»¥ä¸‹çš„Keyï¼š</p>
<ul>
<li>NFCReaderUsageDescription</li>
<li>NSFaceIDUsageDescription</li>
<li>NSPhotoLibraryAddUsageDescription</li>
</ul>
<p>å¦‚æœä½ çš„Appä½¿ç”¨åˆ°äº†NFCã€FaceIDã€ä¿å­˜å›¾ç‰‡çš„åŠŸèƒ½ï¼Œè®°å¾—æ·»åŠ ç›¸åº”çš„Keyã€‚</p>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>iOS10ä¸Šå›¾åº“çš„è®¿é—®å’Œå†™å…¥æƒé™ä¾ç„¶ä¾èµ–äº<code>NSPhotoLibraryUsageDescription</code>Keyï¼Œå¦‚æœåœ¨iOS10ä¸Šåªæ·»åŠ äº†<code>NSPhotoLibraryAddUsageDescription</code>è€Œæ²¡æœ‰æ·»åŠ <code>NSPhotoLibraryUsageDescription</code>ï¼Œå½“è®¿é—®å›¾åº“æˆ–è€…ä¿å­˜å›¾ç‰‡æ—¶åº”ç”¨ä¾ç„¶ä¼šå‘ç”ŸCrash</li>
<li>iOS11ä¸Šåªè¦æ·»åŠ äº†<code>NSPhotoLibraryAddUsageDescription</code>å³å…·å¤‡å›¾åº“çš„è®¿é—®å’Œå†™å…¥æƒé™ï¼Œæ— éœ€å¢åŠ <code>NSPhotoLibraryUsageDescription</code></li>
<li>iOS11ä¸Šå³ä½¿ä¸æ·»åŠ <code>NSPhotoLibraryUsageDescription</code>å’Œ<code>NSPhotoLibraryAddUsageDescription</code>ä¹Ÿå¯ä»¥é€šè¿‡<code>UIImagePickerController</code>æ¥è®¿é—®å›¾åº“(å…¶ä»–APIæ–¹å¼æœªæµ‹è¯•ï¼ŒçœŸæœºå’Œæ¨¡æ‹Ÿå™¨å‡å¯è®¿é—®åˆ°å›¾åº“æ•°æ®)ï¼Œä¹Ÿä¸çŸ¥é“æ˜¯å¦æ˜¯Bugï¼Œå±…ç„¶ä¸éœ€è¦ç”³è¯·æƒé™å°±å¯ä»¥è®¿é—®ç³»ç»Ÿå›¾ç‰‡ã€‚</li>
</ul>
<p>ç»¼ä¸Šæ‰€è¿°ï¼Œå¦‚æœAppéœ€è¦å…¼å®¹iOS10ï¼Œåˆ™æ·»åŠ <code>NSPhotoLibraryUsageDescription</code>å’Œ<code>NSPhotoLibraryAddUsageDescription</code>ï¼Œå¦‚æœåªå…¼å®¹iOS11åˆ™åªæ·»åŠ <code>NSPhotoLibraryAddUsageDescription</code>å³å¯ã€‚</p>
<p>æœ‰å…³Keyçš„è¯´æ˜è¯·å‚è€ƒè¿™é‡Œï¼š<br><a href="https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html" target="_blank" rel="external">https://developer.apple.com/library/content/documentation/General/Reference/InfoPlistKeyReference/Articles/CocoaKeys.html</a></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/10/09/iOS-NSPhotoLibraryAddUsageDescription/" class="archive-article-date">
  	<time datetime="2017-10-09T03:12:21.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-10-09</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-iOS-file-sharing" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/10/09/iOS-file-sharing/">iOSæ·»åŠ æ–‡ä»¶å…±äº«</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>ç”±äºiOSçš„æ²™ç›’æœºåˆ¶ï¼Œå¯¼è‡´åº”ç”¨ä¸èƒ½è®¿é—®æ²™ç›’ç›®å½•ä»¥å¤–çš„æ–‡ä»¶ç›®å½•ã€‚æ‰€ä»¥å¦‚æœæˆ‘ä»¬éœ€è¦å°†éŸ³è§†é¢‘æ–‡ä»¶æ‹·è´åˆ°Appä¸Šï¼Œåªèƒ½æ‹·è´åˆ°Appçš„<code>Documents</code>ç›®å½•<br>å¦‚æœæˆ‘ä»¬çš„Appéœ€è¦æ”¯æŒä»PCå°†æ–‡ä»¶æ‹·è´åˆ°Appçš„Documentsç›®å½•å¹¶å±•ç¤ºå‡ºæ¥ï¼Œåˆ™éœ€è¦åœ¨Info.plistä¸­æ·»åŠ <code>UIFileSharingEnabled</code>(Application supports iTunes file sharing)é”®ï¼Œå¹¶å°†é”®å€¼è®¾ç½®ä¸º<code>YES</code>ã€‚</p>
<p>æ·»åŠ äº†UIFileSharingEnabledé”®å€¼åå°±å¯ä»¥é€šè¿‡iTunesæ¥ç®¡ç†å…±äº«æ–‡ä»¶äº†ï¼Œå¯ä»¥ä»PCæ‹·è´åˆ°Appï¼Œä¹Ÿå¯ä»¥ä»Appæ‹·è´åˆ°PCä¸Šï¼Œä¹Ÿå¯ä»¥é€šè¿‡iTunesåˆ é™¤Appä¸Šçš„æ–‡ä»¶(é€‰ä¸­éœ€è¦åˆ é™¤çš„æ–‡ä»¶ï¼ŒæŒ‰ä¸‹é”®ç›˜çš„<code>delete</code>é”®å³å¯)ã€‚</p>
<p>Appå¯ä»¥é€šè¿‡è®¿é—®Documentsç›®å½•æ¥è·å–éœ€è¦å…³å¿ƒçš„æ–‡ä»¶ï¼Œè¿‡æ»¤æ‰æ— å…³æ–‡ä»¶ã€‚<br><figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> document = <span class="type">NSSearchPathForDirectoriesInDomains</span>(.documentDirectory, .userDomainMask, <span class="literal">true</span>).first &#123;</div><div class="line">    <span class="keyword">if</span> <span class="keyword">let</span> files = <span class="keyword">try</span>? <span class="type">FileManager</span>.<span class="keyword">default</span>.contentsOfDirectory(atPath: document) &#123;</div><div class="line">        <span class="keyword">for</span> file <span class="keyword">in</span> files &#123;</div><div class="line">            <span class="comment">// å¯ä»¥é€šè¿‡åç¼€åæ¥è·å–ä½ å…³å¿ƒçš„æ–‡ä»¶ç±»å‹</span></div><div class="line">            <span class="built_in">print</span>(file)</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>æœ‰å…³<code>File Sharing</code>è¯·å‚è€ƒï¼š<a href="https://support.apple.com/zh-cn/HT201301" target="_blank" rel="external">https://support.apple.com/zh-cn/HT201301</a></p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/10/09/iOS-file-sharing/" class="archive-article-date">
  	<time datetime="2017-10-09T01:36:55.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-10-09</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-tableHeaderView-frame" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/10/tableHeaderView-frame/">UITableViewåŠ¨æ€ä¿®æ”¹tableHeaderViewçš„é«˜åº¦</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ‰æ—¶å€™æˆ‘ä»¬ä¼šç”¨è¡¨æ ¼çš„å¤´éƒ¨è§†å›¾æ¥åšä¸€äº›ç®€å•çš„UIå±•ç¤ºï¼Œå¦‚æœé‡åˆ°é«˜åº¦å›ºå®šçš„æƒ…å†µè¿˜å¥½ï¼Œå¹¶æ— ä»»ä½•é—®é¢˜ã€‚ä½†æ˜¯å¦‚æœé‡åˆ°é«˜åº¦éœ€è¦åŠ¨æ€è°ƒæ•´çš„æ—¶å€™ï¼Œé‚£å°±æœ‰ç‚¹è›‹ç–¼äº†ï¼Œå› ä¸ºä½ ä¸èƒ½é€šè¿‡ç›´æ¥ä¿®æ”¹tableHeaderViewçš„frameå±æ€§æ¥è¾¾åˆ°æ•ˆæœã€‚ç›´æ¥ä¿®æ”¹frameä¼šå¯¼è‡´UIæœ‰æ—¶å€™æ­£å¸¸æœ‰æ—¶å€™åˆä¸æ­£å¸¸ï¼Œå®Œå…¨æŠŠæ§ä¸äº†ã€‚</p>
<p>é‚£ä¹ˆæˆ‘ä»¬è¯¥å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜å‘¢ï¼Œä¸»è¦æœ‰ä»¥ä¸‹å‡ æ­¥ï¼š</p>
<ol>
<li><p>å…ˆå–å‡ºUITableViewçš„tableHeaderView</p>
</li>
<li><p>å°†tableHeaderViewä»çˆ¶è§†å›¾ç§»é™¤å¹¶å°†UITableViewçš„tableHeaderViewè®¾ç½®ä¸ºnil</p>
</li>
<li><p>æ›´æ–°tableHeaderViewçš„frame</p>
</li>
<li><p>é‡æ–°ç»™UITableViewçš„tableHeaderViewèµ‹å€¼</p>
</li>
</ol>
<p>æ¼”ç¤ºä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">UIView</span> *tableHeaderView = <span class="keyword">self</span>.tableView.tableHeaderView;</div><div class="line"><span class="built_in">CGRect</span> frame = tableHeaderView.frame;</div><div class="line">[tableHeaderView removeFromSuperview];</div><div class="line"><span class="keyword">self</span>.tableView.tableHeaderView = <span class="literal">nil</span>;</div><div class="line">frame.size.height = <span class="number">100.0</span>; <span class="comment">// æ–°é«˜åº¦</span></div><div class="line">tableHeaderView.frame = frame;</div><div class="line"><span class="keyword">self</span>.tableView.tableHeaderView = tableHeaderView;</div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/08/10/tableHeaderView-frame/" class="archive-article-date">
  	<time datetime="2017-08-10T08:16:36.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-08-10</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-iOS-break-multilayer-nested-loop" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/08/01/iOS-break-multilayer-nested-loop/">Objective-C/Swifté€€å‡ºå¤šå±‚å¾ªç¯</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>å¦‚æœæœ‰å¤šå±‚åµŒå¥—çš„æƒ…å†µä¸‹ï¼Œæœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨æŸå¤„ç›´æ¥é€€å‡ºå¤šå±‚å¾ªç¯ï¼Œåœ¨Objective-Cä¸‹å¹¶æ²¡æœ‰æ¯”è¾ƒå¥½çš„æ–¹å¼å®ç°ï¼›è€Œåœ¨Swfitä¸­å¯ä»¥é€šè¿‡æ ‡ç­¾è¯­å¥æ¥æ¯”è¾ƒä¼˜é›…åœ°å®ç°ï¼Œé¦–å…ˆéœ€è¦ä½¿ç”¨æ ‡ç­¾æ ‡è¯†ä¸åŒçš„å¾ªç¯ä½“ï¼Œå½¢å¼å¦‚ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="type">LabelName</span>: <span class="keyword">while</span> condition &#123;</div><div class="line">	statements</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Swifté€€å‡ºå¤šå±‚å¾ªç¯ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">let</span> arr = [[<span class="number">1</span>,<span class="number">2</span>], [<span class="number">3</span>,<span class="number">4</span>], [<span class="number">5</span>,<span class="number">6</span>]]</div><div class="line">for1: <span class="keyword">for</span> items <span class="keyword">in</span> arr &#123;</div><div class="line">    for2: <span class="keyword">for</span> item <span class="keyword">in</span> items &#123;</div><div class="line">        <span class="built_in">print</span>(item)</div><div class="line">        <span class="keyword">if</span> item == <span class="number">3</span> &#123;</div><div class="line">            <span class="keyword">break</span> for1</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>é€šè¿‡<code>break for1</code>å³å¯é€€å‡ºæœ€å¤–å±‚å¾ªç¯ï¼Œæ§åˆ¶å°å°†ä¾æ¬¡æ‰“å°<code>1ã€2ã€3</code>ã€‚</p>
<p>è¯´å®Œäº†Swiftï¼Œä¸‹é¢æ¥è¯´è¯´Objective-Cä¸‹å¦‚ä½•å®ç°è¿™ç§æ“ä½œã€‚Objective-Cæ—¢ä¸æ”¯æŒæ ‡ç­¾è¯­å¥ï¼Œä¹Ÿæ²¡æœ‰ç±»ä¼¼PHPä¸­<code>break 2</code>è¿™ç§é»‘ç§‘æŠ€ï¼Œä½†æ˜¯Objective-Cæ˜¯Cçš„è¶…é›†ï¼Œè€ŒCè¯­è¨€æä¾›äº†å¼ºå¤§çš„<code>goto</code>è¯­å¥ï¼Œè™½ç„¶å¾ˆå¤šäººéƒ½ä¸å»ºè®®ä½¿ç”¨gotoï¼Œä½†æ˜¯æ—¢ç„¶å­˜åœ¨å°±å¿…ç„¶æœ‰å®ƒå­˜åœ¨çš„é“ç†ï¼Œæ˜¯ä¸ï¼Ÿé’ˆå¯¹è¿™ç§æƒ…å†µï¼Œgotoå°±å¾ˆé€‚åˆã€‚ä½†æ˜¯è¿˜æ˜¯å¼ºçƒˆå»ºè®®ä½ è°¨æ…ä½¿ç”¨gotoï¼Œé™¤éä½ æ¸…æ¥šä½ çš„ä»£ç åœ¨å¹²ä»€ä¹ˆã€‚</p>
<p>Objective-Cé€€å‡ºå¤šå±‚å¾ªç¯ç¤ºä¾‹ä»£ç ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">NSArray</span>&lt;<span class="built_in">NSArray</span>&lt;<span class="built_in">NSString</span> *&gt; *&gt; *items = @[@[<span class="string">@"1"</span>,<span class="string">@"2"</span>], @[<span class="string">@"3"</span>,<span class="string">@"4"</span>], @[<span class="string">@"5"</span>,<span class="string">@"6"</span>]];</div><div class="line"><span class="keyword">for</span> (<span class="built_in">NSArray</span>&lt;<span class="built_in">NSString</span> *&gt; *array <span class="keyword">in</span> items) &#123;</div><div class="line">    <span class="keyword">for</span> (<span class="built_in">NSString</span> *item <span class="keyword">in</span> array) &#123;</div><div class="line">        <span class="built_in">NSLog</span>(<span class="string">@"%@"</span>, item);</div><div class="line">        <span class="keyword">if</span> ([item intValue] == <span class="number">3</span>) &#123;</div><div class="line">            <span class="comment">// è·³å‡ºå¤–å±‚å¾ªç¯</span></div><div class="line">            <span class="keyword">goto</span> finally;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line">finally: &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"goto label."</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>æ§åˆ¶å°è¿˜æ˜¯ä¼šä¾æ¬¡æ‰“å°å‡º1ã€2ã€3çš„å€¼ï¼Œå¹¶ä¸”å½“itemçš„intValueç­‰äº3çš„æ—¶å€™è·³å‡ºå¤šå±‚forå¾ªç¯ï¼Œç›´æ¥æ‰§è¡Œfinallyè¯­å¥å—å†…çš„ä»£ç ã€‚</p>
<blockquote>
<p>ä½¿ç”¨gotoæ—¶éœ€è¦æ³¨æ„ï¼šgotoè¯­å¥åªèƒ½åœ¨å‡½æ•°å†…éƒ¨è¿›è¡Œè½¬ç§»ï¼Œä¸èƒ½å¤Ÿè·¨è¶Šå‡½æ•°ï¼›labelä»£ç å—çš„å®šä¹‰ä½ç½®ã€‚</p>
</blockquote>
<p>gotoè¯­å¥ä½¿ç”¨çš„ä¸€èˆ¬æ ¼å¼ä¸ºï¼š<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">goto label;</div><div class="line">label: &#123; statements &#125;</div><div class="line">æˆ–è€…</div><div class="line">label: &#123; statements &#125;</div><div class="line">goto label;</div></pre></td></tr></table></figure></p>
<p>å‰ä¸€ç§å®šä¹‰æ–¹å¼å‚è§ä¸Šé¢çš„ç¤ºä¾‹ï¼Œåä¸€ç§å®šä¹‰æ–¹å¼çš„ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">first: &#123;</div><div class="line">    i++;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"%d"</span>, i);</div><div class="line">&#125;</div><div class="line"><span class="comment">// ä»£ç æ‰§è¡Œåˆ°è¿™é‡Œæ—¶iç­‰äº1ï¼Œæ§åˆ¶å°è¾“å‡º1</span></div><div class="line"><span class="keyword">if</span> (i &lt; <span class="number">3</span>) &#123;</div><div class="line">    <span class="keyword">goto</span> first;</div><div class="line">&#125;</div><div class="line"><span class="built_in">NSLog</span>(<span class="string">@"--end--"</span>);</div><div class="line"><span class="comment">// æ§åˆ¶å°å°†è¾“å‡º1ã€2ã€3ã€--end--</span></div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/08/01/iOS-break-multilayer-nested-loop/" class="archive-article-date">
  	<time datetime="2017-08-01T07:44:11.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-08-01</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-iOS-screenshot" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/24/iOS-screenshot/">iOSæˆªå±åˆ†äº«</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>æœ€è¿‘åœ¨æŠŠç©<code>æ”¯ä»˜å®</code>å’Œ<code>å°ç±³å•†åŸ</code>Appæ—¶å‘ç°äº†ä¸ªå¥½ç©çš„ä¸œè¥¿ï¼Œåœ¨æ”¯ä»˜å®é¦–é¡µä¸­æˆªå±ï¼Œåˆ™ä¼šåœ¨å±å¹•å³ä¾§å¼¹å‡ºä¸€ä¸ªå°çª—å£æ¥å±•ç¤ºé¦–é¡µæˆªå±å›¾ç‰‡ï¼Œç‚¹å‡»å›¾ç‰‡å°±ä¼šè¿›å…¥æ±‚åŠ©åé¦ˆé¡µé¢ï¼Œå†ç‚¹å‡»æ„è§åé¦ˆï¼Œæˆªå±çš„å›¾ç‰‡å°±ä¼šè‡ªåŠ¨è¢«é€‰ä¸Šä½œä¸ºåé¦ˆå›¾ç‰‡ä½¿ç”¨ï¼›è€Œå°ç±³å•†åŸçš„åšæ³•åˆ™æ›´å¥½ç©ï¼Œåœ¨ä»»æ„é¡µé¢ä¸­è¿›è¡Œæˆªå±ï¼Œåˆ™ä¼šåœ¨å±å¹•å³ä¸‹è§’ä¸­å¼¹å‡ºä¸€ä¸ª<code>åˆ†äº«æˆªå›¾ç»™å¥½å‹</code>çš„æç¤ºæ¡†ï¼Œç‚¹å‡»åˆ™ä¼šå¼¹å‡ºåˆ†äº«é¡µé¢ï¼Œåœ¨æ­¤å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åˆšæ‰æˆªå–çš„å±å¹•å›¾ç‰‡ï¼Œæ¥ä¸‹æ¥ä½ å°±å¯ä»¥æŠŠæˆªå±å›¾ç‰‡åˆ†äº«ç»™ä½ çš„å¾®ä¿¡æœ‹å‹ã€QQå¥½å‹ã€å‘åˆ°æœ‹å‹åœˆã€å‘å¾®åšç­‰ç­‰ï¼Œä»»å›é€‰æ‹©ã€‚</p>
<p>æŸ¥äº†ä¸‹èµ„æ–™ï¼Œå‘ç°è‹¹æœåœ¨iOS7ä¸­æ–°å¢äº†<code>UIApplicationUserDidTakeScreenshotNotification</code>é€šçŸ¥ï¼Œåªè¦æ³¨å†Œäº†è¿™ä¸ªé€šçŸ¥ï¼Œåœ¨ç”¨æˆ·æˆªå±çš„æ—¶å€™Appå°±ä¼šæ”¶åˆ°æˆªå±çš„é€šçŸ¥ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥åšä½ æƒ³åšçš„äº‹æƒ…äº†ã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// This notification is posted after the user takes a screenshot (for example by pressing both the home and lock screen buttons)</span></div><div class="line"><span class="built_in">UIKIT_EXTERN</span> <span class="built_in">NSNotificationName</span> <span class="keyword">const</span> <span class="built_in">UIApplicationUserDidTakeScreenshotNotification</span> <span class="built_in">NS_AVAILABLE_IOS</span>(<span class="number">7</span>_0);</div></pre></td></tr></table></figure>
<p>ä¸‹é¢æˆ‘ä»¬è‡ªå·±æ¥æ’¸ä¸€ä¸ªè‡ªå·±çš„æˆªå±åˆ†äº«åŠŸèƒ½ã€‚æ‰“å¼€é¦–é¡µæ§åˆ¶å™¨ï¼Œé‡å†™viewDidAppearå’ŒviewDidDisappearæ–¹æ³•ã€‚å› ä¸ºæˆ‘ä»¬åªéœ€è¦åœ¨é¦–é¡µä¸­è¿›è¡Œæˆªå±åˆ†äº«ï¼Œåœ¨å…¶ä»–é¡µé¢æˆªå±æ—¶ä¸å¤„ç†ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨viewDidAppearæ–¹æ³•ä¸­æ³¨å†Œé€šçŸ¥å¹¶ä¸”åœ¨viewDidDisappearæ–¹æ³•ä¸­ç§»é™¤é€šçŸ¥ã€‚</p>
<p>ç¤ºä¾‹ä¸­é€šè¿‡<code>[UIApplication sharedApplication].keyWindow</code>æ¥è·å–æˆªå±å›¾ç‰‡ï¼Œå› ä¸ºå¦‚æœAppä¸­å­˜åœ¨å¯¼èˆªæ /TabBarçš„æƒ…å†µä¸‹ï¼Œåªæœ‰é€šè¿‡keyWindowç”Ÿæˆçš„å›¾ç‰‡æ‰èƒ½åŒ…å«å¯¼èˆªæ /TabBarï¼Œå¦‚æœä½ ä»…ä»…æƒ³åˆ†äº«é¦–é¡µå†…å®¹ï¼Œä¸åŒ…å«å¯¼èˆªæ /TabBarçš„è¯ï¼Œé‚£ä½ ä¹Ÿå¯ä»¥ç›´æ¥ç”¨é¦–é¡µæ§åˆ¶å™¨çš„<code>self.view</code>æ¥ç”Ÿæˆæˆªå±å›¾ç‰‡ï¼Œç”šè‡³å¦‚æœä½ æƒ³åˆ†äº«ä¸€ä¸ªé•¿å›¾ç‰‡ï¼Œå¦‚:é¦–é¡µæ˜¯ä¸€ä¸ªæ»šåŠ¨è§†å›¾ï¼Œé‚£ä¹ˆä½ å®Œå…¨å¯ä»¥é€šè¿‡æ»šåŠ¨è§†å›¾æ¥ç”Ÿæˆä¸€ä¸ªé•¿å›¾ç‰‡ç„¶åè¿›è¡Œåˆ†äº«ï¼Œè¿™ä¸ªå®Œå…¨å¯ä»¥æ ¹æ®ä½ çš„éœ€æ±‚æ¥å†³å®šã€‚</p>
<blockquote>
<p>è‡ªå·±ç”Ÿæˆçš„æˆªå±å›¾ç‰‡æœ‰ä¸€ç‚¹å¾ˆé—æ†¾ï¼Œå°±æ˜¯ç”Ÿæˆçš„å›¾ç‰‡å¹¶ä¸èƒ½åŒ…å«é¡¶éƒ¨çŠ¶æ€æ å†…å®¹ï¼Œæ”¯ä»˜å®å’Œå°ç±³å•†åŸéƒ½æœ‰è¿™ä¸ªé—®é¢˜ï¼Œè¿™ä¸ªåº”è¯¥æ˜¯æ²¡è¾™äº†ã€‚æˆ–è®¸åªèƒ½å»ç³»ç»Ÿç›¸å†Œæ‹¿å›¾ç‰‡äº†ï¼Œè¿™ä¸ªä½ å°±è‡ªå·±å»æµ‹è¯•å§ã€‚</p>
</blockquote>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)viewDidAppear:(<span class="built_in">BOOL</span>)animated &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidAppear:animated];</div><div class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter] addObserver:<span class="keyword">self</span> selector:<span class="keyword">@selector</span>(userDidTakeScreenshotNotification:) name:<span class="built_in">UIApplicationUserDidTakeScreenshotNotification</span> object:<span class="literal">nil</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)viewDidDisappear:(<span class="built_in">BOOL</span>)animated &#123;</div><div class="line">    [<span class="keyword">super</span> viewDidDisappear:animated];</div><div class="line">    [[<span class="built_in">NSNotificationCenter</span> defaultCenter] removeObserver:<span class="keyword">self</span> name:<span class="built_in">UIApplicationUserDidTakeScreenshotNotification</span> object:<span class="literal">nil</span>];</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (<span class="keyword">void</span>)userDidTakeScreenshotNotification:(<span class="built_in">NSNotification</span> *)sender &#123;</div><div class="line">    <span class="built_in">UIWindow</span> *window = [<span class="built_in">UIApplication</span> sharedApplication].keyWindow;</div><div class="line">    <span class="built_in">UIImage</span> *screenshotImage = [<span class="built_in">UIImage</span> snapshotImageWithView:window];</div><div class="line">    <span class="comment">// <span class="doctag">TODO:</span> å°†screenshotImageè¿›è¡Œåˆ†äº«ï¼Œå¯ä»¥è°ƒç”¨å‹ç›ŸSDKæˆ–è‡ªå·±é›†æˆç¬¬ä¸‰æ–¹SDKå®ç°ï¼Œè¿™é‡Œå°±ä¸åšæ¼”ç¤ºäº†</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¸‹é¢é™„ä¸Šä»UIViewè·å–å›¾ç‰‡çš„ä»£ç :</p>
<p>Objectie-Cç‰ˆæœ¬</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="comment">/**</span></div><div class="line"> *  é€šè¿‡è§†å›¾è·å–è§†å›¾å¿«ç…§</div><div class="line"> *</div><div class="line"> *  @param view éœ€è¦ç”Ÿæˆå¿«ç…§çš„è§†å›¾</div><div class="line"> *</div><div class="line"> *  @return å¿«ç…§å›¾ç‰‡</div><div class="line"> */</div><div class="line">+ (<span class="keyword">instancetype</span>)snapshotImageWithView:(<span class="built_in">UIView</span> * __<span class="keyword">nonnull</span>)view &#123;</div><div class="line">    <span class="keyword">if</span> (<span class="literal">nil</span> == view) &#123;</div><div class="line">        <span class="keyword">return</span> <span class="literal">nil</span>;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">UIGraphicsBeginImageContextWithOptions</span>(view.bounds.size, <span class="literal">YES</span>, [<span class="built_in">UIScreen</span> mainScreen].scale);</div><div class="line">    <span class="built_in">CGContextRef</span> context = <span class="built_in">UIGraphicsGetCurrentContext</span>();</div><div class="line">    [view.layer renderInContext:context];</div><div class="line">    <span class="built_in">UIImage</span> *image = <span class="built_in">UIGraphicsGetImageFromCurrentImageContext</span>();</div><div class="line">    <span class="built_in">UIGraphicsEndImageContext</span>();</div><div class="line">    </div><div class="line">    <span class="keyword">return</span> image;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Swiftç‰ˆæœ¬</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIImage</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/// è·å–è§†å›¾å¿«ç…§å›¾ç‰‡</span></div><div class="line">    <span class="comment">/// å¿…é¡»åœ¨ä¸»çº¿ç¨‹ä¸Šæ‰§è¡Œ</span></div><div class="line">    <span class="comment">///</span></div><div class="line">    <span class="comment">/// - Parameter view: éœ€è¦ç”Ÿæˆå¿«ç…§çš„è§†å›¾</span></div><div class="line">    <span class="comment">/// - Returns: å¿«ç…§å›¾ç‰‡</span></div><div class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">snapshot</span><span class="params">(<span class="number">_</span> view: UIView)</span></span> -&gt; <span class="type">UIImage</span>? &#123;</div><div class="line">        <span class="keyword">if</span> !<span class="type">Thread</span>.isMainThread &#123;</div><div class="line">            <span class="built_in">assert</span>(<span class="literal">false</span>, <span class="string">"UIImage.<span class="subst">\(#function)</span> must be called from main thread only."</span>)</div><div class="line">        &#125;</div><div class="line">        <span class="type">UIGraphicsBeginImageContextWithOptions</span>(view.bounds.size, <span class="literal">true</span>, <span class="type">UIScreen</span>.main.scale)</div><div class="line">        <span class="keyword">defer</span> &#123; <span class="type">UIGraphicsEndImageContext</span>() &#125;</div><div class="line">        <span class="keyword">guard</span> <span class="keyword">let</span> context = <span class="type">UIGraphicsGetCurrentContext</span>() <span class="keyword">else</span> &#123; <span class="keyword">return</span> <span class="literal">nil</span> &#125;</div><div class="line">        view.layer.render(<span class="keyword">in</span>: context)</div><div class="line">        <span class="keyword">return</span> <span class="type">UIGraphicsGetImageFromCurrentImageContext</span>()</div><div class="line">    &#125;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/07/24/iOS-screenshot/" class="archive-article-date">
  	<time datetime="2017-07-24T02:36:49.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-07-24</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
    <article id="post-reloadData-completion" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-inner">
    
      <input type="hidden" class="isFancy" />
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2017/07/14/reloadData-completion/">UICollectionViewç›‘å¬reloadDataå®ŒæˆçŠ¶æ€</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <blockquote>
<p>å¦‚æœä½ åªæƒ³çŸ¥é“ä»£ç çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿ï¼Œè¯·ç›´æ¥çœ‹æ–‡ç« åº•éƒ¨çš„ç¤ºä¾‹ä»£ç ã€‚</p>
</blockquote>
<p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦åœ¨UICollectionViewæ‰§è¡Œäº†reloadDataæ–¹æ³•åï¼Œç›‘å¬reloadDataçš„å®ŒæˆçŠ¶æ€ä»¥ä¾¿æ‰§è¡ŒæŸäº›å›è°ƒæ“ä½œã€‚å¦‚æœæˆ‘ä»¬ç´§è·Ÿç€reloadDataä»£ç ï¼Œåœ¨å…¶åé¢ç»§ç»­ç¼–å†™æˆ‘ä»¬çš„å›è°ƒæ“ä½œï¼Œè¿™ä¸ªæ—¶å€™ä½ ä¼šå‘ç°ç¨‹åºçš„è¿è¡Œç»“æœä¸æˆ‘ä»¬çš„é¢„æœŸæœ‰å‡ºå…¥ï¼Œå¹¶éæ˜¯æˆ‘ä»¬æ‰€æœŸæœ›çš„ç»“æœã€‚</p>
<p>æœ€è¿‘åœ¨æ’¸ä¸€ä¸ªå›¾ç‰‡è½®æ’­çš„åŠŸèƒ½ï¼Œç”¨UICollectionViewæ¥åšï¼Œå› ä¸ºUICollectionViewæœ¬èº«å°±æ”¯æŒæ¨ªå‘æ»šåŠ¨ï¼Œå¹¶ä¸”æœ‰å¾ˆå¥½çš„é‡ç”¨æœºåˆ¶ï¼Œä¹Ÿä¸ç”¨æˆ‘ä»¬è‡ªå·±è®¡ç®—ä¸Šä¸€é¡µä¸‹ä¸€é¡µç„¶åå°†è§†å›¾æŒªæ¥æŒªå»çš„ã€‚ç”±äºè¦åšä¸€ä¸ªæ— é™æ»šåŠ¨çš„åŠŸèƒ½ï¼Œæ‰€ä»¥åšæ³•å°±æ˜¯åœ¨<code>- (NSInteger)collectionView:numberOfItemsInSection:</code>æ–¹æ³•ä¸­è¿”å›<code>å›¾ç‰‡ä¸ªæ•°xåŸºæ•°(å¦‚:100)</code>çš„æ€»æ•°ï¼Œç„¶åå°†UICollectionViewæ»šåŠ¨è‡³ç¬¬<code>å›¾ç‰‡ä¸ªæ•°xåŸºæ•°x0.5</code>ä¸ªCellï¼Œè¿™æ ·ä¾¿å¯ä»¥å·¦å³æ— é™æ»‘åŠ¨äº†ï¼Œé—®é¢˜çš„å…³é”®å°±åœ¨äºå¦‚ä½•åœ¨realoadDataå®Œæˆä¹‹åæ»šåŠ¨åˆ°æŒ‡å®šçš„IndexPathä¸Šã€‚å¦‚æœä½ ç›´æ¥åƒä¸‹é¢è¿™æ ·å†™ä»£ç ï¼Œä½ ä¼šæƒŠè®¶åœ°å‘ç°ï¼ŒUICollectionViewå¹¶æ²¡æœ‰æ»šåŠ¨åˆ°æŒ‡å®šçš„IndexPathï¼Œè€Œæ˜¯ä»ç„¶æ˜¾ç¤ºç¬¬ä¸€ä¸ªCellã€‚</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">[collectionView reloadData];</div><div class="line"><span class="comment">// åœ¨è¿™é‡Œç»§ç»­ç¼–å†™ä½ çš„ç‰¹å®šä»£ç </span></div><div class="line"><span class="built_in">NSIndexPath</span> *indexPath = [<span class="built_in">NSIndexPath</span> indexPathForItem:<span class="number">100</span> inSection:<span class="number">0</span>];</div><div class="line">[collectionView scrollToItemAtIndexPath:indexPath atScrollPosition:<span class="built_in">UICollectionViewScrollPositionNone</span> animated:<span class="literal">NO</span>];</div></pre></td></tr></table></figure>
<p>UICollectionViewæœ‰ä¸€ä¸ªæ–¹æ³•<code>-performBatchUpdates:completion:</code>ï¼Œå…¶å®šä¹‰å¦‚ä¸‹ï¼š</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">- (<span class="keyword">void</span>)performBatchUpdates:(<span class="keyword">void</span> (^ __<span class="keyword">nullable</span>)(<span class="keyword">void</span>))updates completion:(<span class="keyword">void</span> (^ __<span class="keyword">nullable</span>)(<span class="built_in">BOOL</span> finished))completion; <span class="comment">// allows multiple insert/delete/reload/move calls to be animated simultaneously. Nestable.</span></div></pre></td></tr></table></figure>
<p>æ ¹æ®æ–¹æ³•åå’Œæ³¨é‡Šå¾ˆå®¹æ˜“æ˜ç™½è¿™ä¸ªæ¥å£æ˜¯ç”¨æ¥æ‰¹é‡æ“ä½œæ›´æ–°UICollectionViewçš„ï¼ŒæŠŠä½ éœ€è¦æ’å…¥/åˆ é™¤/é‡æ–°åŠ è½½/ç§»åŠ¨UICollectionViewCellçš„ä»£ç ç»Ÿç»Ÿæ”¾åˆ°<code>updates</code>è¿™ä¸ªblockä¸­ï¼Œå¹¶ä¸”åœ¨å½“è¿™äº›æ›´æ–°æ“ä½œå®Œæˆæ—¶ç³»ç»Ÿä¼šå›è°ƒ<code>completion</code>è¿™ä¸ªblockã€‚</p>
<p>çœ‹åˆ°è¿™é‡Œï¼Œä½ æ˜¯ä¸æ˜¯å¾ˆæ¿€åŠ¨ï¼Œæ˜¯ä¸æ˜¯å·²ç»æƒ³åˆ°è¯¥å¦‚ä½•å†™ä»£ç äº†ï¼Œæ˜¯ä¸æ˜¯åƒä¸‹é¢è¿™æ ·:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// é”™è¯¯çš„ä½¿ç”¨å§¿åŠ¿</span></div><div class="line">[collectionView performBatchUpdates:^&#123;</div><div class="line">    [collectionView reloadData];</div><div class="line">&#125; completion:^(<span class="built_in">BOOL</span> finished) &#123;</div><div class="line">    <span class="built_in">NSLog</span>(<span class="string">@"*************reloadDataæ‰§è¡Œå®Œæ¯•*********"</span>);</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>å¦‚æœä½ æ˜¯è¿™æ ·å­å†™çš„ä»£ç ï¼Œå¾ˆå¥½ï¼Œå’Œæˆ‘æƒ³æ³•ä¸€è‡´ï¼Œè™½ç„¶ç¨‹åº<code>æœ‰å¯èƒ½</code>è¿è¡Œå¾ˆæ­£å¸¸ï¼Œä¸ºä»€ä¹ˆè¯´æœ‰å¯èƒ½å‘¢ï¼Œå› ä¸ºå½“<code>[collectionView reloadData]</code>ä¹‹åï¼Œå¦‚æœå±•ç¤ºçš„æ•°æ®å¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ï¼Œæ•°æ®æœªå¢åŠ ä¹Ÿæœªå‡å°‘ï¼Œé‚£ä¹ˆæ­¤æ—¶ç¨‹åºå°±èƒ½å¤Ÿæ­£å¸¸è¿è¡Œï¼›ä½†æ˜¯å¦‚æœæ‰§è¡ŒrealodDataåï¼Œæ•°æ®æºè¿”å›çš„æ•°æ®æœ‰æ‰€æ”¹å˜ï¼Œéœ€è¦å±•ç¤ºçš„æ•°æ®æ¡ç›®å¢å¤šæˆ–å‡å°‘äº†ï¼Œé‚£ä¹ˆè¿™ä¸ªæ—¶å€™ç¨‹åºå°±ä¼šCrashäº†ï¼Œå¹¶ä¸”æ§åˆ¶å°ä¼šæ‰“å°å¦‚ä¸‹çš„é”™è¯¯ä¿¡æ¯ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">2017-07-14 11:22:57.054 Demo[9368:620226] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Invalid update: invalid number of sections.  The number of sections contained in the collection view after the update (0) must be equal to the number of sections contained in the collection view before the update (2), plus or minus the number of sections inserted or deleted (0 inserted, 0 deleted).'</div><div class="line">*** First throw call stack:</div><div class="line">(</div><div class="line">	0   CoreFoundation                      0x0000000109a9fb0b __exceptionPreprocess + 171</div><div class="line">	1   libobjc.A.dylib                     0x000000010c770141 objc_exception_throw + 48</div><div class="line">	2   CoreFoundation                      0x0000000109aa3cf2 +[NSException raise:format:arguments:] + 98</div><div class="line">	3   Foundation                          0x000000010a9f13b6 -[NSAssertionHandler handleFailureInMethod:object:file:lineNumber:description:] + 193</div><div class="line">	4   UIKit                               0x000000010dec753d -[UICollectionView _endItemAnimationsWithInvalidationContext:tentativelyForReordering:animator:] + 15364</div><div class="line">	5   UIKit                               0x000000010ded0259 -[UICollectionView _endUpdatesWithInvalidationContext:tentativelyForReordering:animator:] + 71</div><div class="line">	6   UIKit                               0x000000010ded05a0 -[UICollectionView _performBatchUpdates:completion:invalidationContext:tentativelyForReordering:animator:] + 437</div><div class="line">	7   UIKit                               0x000000010ded03c8 -[UICollectionView _performBatchUpdates:completion:invalidationContext:tentativelyForReordering:] + 91</div><div class="line">	8   UIKit                               0x000000010ded034a -[UICollectionView _performBatchUpdates:completion:invalidationContext:] + 74</div><div class="line">	9   UIKit                               0x000000010ded029f -[UICollectionView performBatchUpdates:completion:] + 53</div><div class="line">	10  VBemall                             0x00000001082da642 __31-[VBHomeController viewDidLoad]_block_invoke + 194</div><div class="line">	11  libdispatch.dylib                   0x000000010f6aa05c _dispatch_client_callout + 8</div><div class="line">	12  libdispatch.dylib                   0x000000010f686c6e _dispatch_continuation_pop + 1020</div><div class="line">	13  libdispatch.dylib                   0x000000010f69b9fc _dispatch_source_latch_and_call + 230</div><div class="line">	14  libdispatch.dylib                   0x000000010f6944f1 _dispatch_source_invoke + 1167</div><div class="line">	15  libdispatch.dylib                   0x000000010f68b69a _dispatch_main_queue_callback_4CF + 1066</div><div class="line">	16  CoreFoundation                      0x0000000109a64909 __CFRUNLOOP_IS_SERVICING_THE_MAIN_DISPATCH_QUEUE__ + 9</div><div class="line">	17  CoreFoundation                      0x0000000109a2aae4 __CFRunLoopRun + 2164</div><div class="line">	18  CoreFoundation                      0x0000000109a2a016 CFRunLoopRunSpecific + 406</div><div class="line">	19  GraphicsServices                    0x0000000111ae5a24 GSEventRunModal + 62</div><div class="line">	20  UIKit                               0x000000010d57c0d4 UIApplicationMain + 159</div><div class="line">	21  VBemall                             0x00000001082da1ef main + 111</div><div class="line">	22  libdyld.dylib                       0x000000010f6f665d start + 1</div><div class="line">)</div><div class="line">libc++abi.dylib: terminating with uncaught exception of type NSException</div></pre></td></tr></table></figure>
<p>çœ‹æ¥æ˜¯ä¸èƒ½è¿™æ ·å­ç”¨äº†ï¼Œä¸èƒ½ç›´æ¥åœ¨<code>updates</code>è¿™ä¸ªblockä¸­æ‰§è¡ŒreloadDataæ–¹æ³•ã€‚</p>
<p>ç„¶åæˆ‘å°è¯•äº†å°†reloadDataæ”¾åˆ°blockå¤–ï¼Œå‘ç°èƒ½å¤Ÿç¨‹åºèƒ½å¤Ÿæ­£å¸¸æŒ‰ç…§æˆ‘ä»¬çš„é¢„æœŸè¿è¡Œäº†ï¼Œä»£ç å¦‚ä¸‹:</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// ä»£ç çš„æ­£ç¡®ä½¿ç”¨å§¿åŠ¿</span></div><div class="line">[collectionView reloadData];</div><div class="line">[collectionView performBatchUpdates:<span class="literal">nil</span> completion:^(<span class="built_in">BOOL</span> finished) &#123;</div><div class="line">	<span class="built_in">NSIndexPath</span> *indexPath = [<span class="built_in">NSIndexPath</span> indexPathForItem:<span class="number">100</span> inSection:<span class="number">0</span>];</div><div class="line">	[collectionView scrollToItemAtIndexPath:indexPath atScrollPosition:<span class="built_in">UICollectionViewScrollPositionNone</span> animated:<span class="literal">NO</span>];</div><div class="line">&#125;];</div></pre></td></tr></table></figure>
<p>ps: UITableViewåœ¨iOS11ä¹Ÿå¼•å…¥äº†<code>-performBatchUpdates:completion:</code>è¿™ä¸ªæ¥å£ï¼Œä½¿ç”¨ä¸Šåº”è¯¥ä¹Ÿæ˜¯å’ŒUICollectionViewä¸€æ ·ä¸€æ ·çš„ã€‚</p>

      
    </div>
    <div class="article-info article-info-index">
      
      <a href="/2017/07/14/reloadData-completion/" class="archive-article-date">
  	<time datetime="2017-07-14T02:42:39.000Z" itemprop="datePublished"><i class="icon-clock"></i>2017-07-14</time>
</a>
      
	<div class="article-tag tagcloud">
		<i class="icon-price-tags"></i>
		<ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/iOS/">iOS</a></li></ul>
	</div>

      

      <div class="clearfix"></div>
    </div>
  </div>
</article>










  
  
    <nav id="page-nav">
      <a class="extend prev" rel="prev" href="/page/2/">&laquo; Prev</a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/">Next &raquo;</a>
    </nav>
  


      </div>
      <footer id="footer">
  <div class="outer">
    <div id="footer-info">
    	<div class="footer-left">
    		&copy; 2018 å´å“è¯š
    	</div>
      <a href="http://www.miitbeian.gov.cn/" target="_blank">ç²¤ICPå¤‡18042388å·-1</a>
      	<div class="footer-right">
      		<a href="http://hexo.io/" target="_blank">Hexo</a>  Theme <a href="https://github.com/litten/hexo-theme-yilia" target="_blank">Yilia</a> by Litten
      	</div>
    </div>
  </div>
</footer>
    </div>
    <script>
	var yiliaConfig = {
		fancybox: true,
		mathjax: false,
		animate: true,
		isHome: true,
		isPost: false,
		isArchive: false,
		isTag: false,
		isCategory: false,
		open_in_new: false,
		root: "/",
		innerArchive: true
	}
</script>

<script src="/./main.js"></script>


    
<div class="tools-col">
  <ul class="btn-wrap">
    
      <li class="chose" data-hook="tools-section-all"><span class="text">å…¨éƒ¨</span><i class="icon-book"></i></li>
    
    
      <li data-hook="tools-section-tag"><span class="text">æ ‡ç­¾</span><i class="icon-price-tags"></i></li>
    
    
      <li data-hook="tools-section-friends"><span class="text">å‹é“¾</span><i class="icon-link"></i></li>
    
    
      <li data-hook="tools-section-me"><span class="text">æˆ‘</span><i class="icon-smile"></i></li>
    
  </ul>
  <div class="tools-wrap">
    
    	<section class="tools-section tools-section-all chose">
    	</section>
    

    
    	<section class="tools-section tools-section-tag">
    			<div class="widget tagcloud" id="js-tagcloud">
    				<a href="/tags/Android/" style="font-size: 10px;">Android</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/Other/" style="font-size: 12.5px;">Other</a> <a href="/tags/Python/" style="font-size: 10px;">Python</a> <a href="/tags/Swift/" style="font-size: 17.5px;">Swift</a> <a href="/tags/iOS/" style="font-size: 20px;">iOS</a> <a href="/tags/macOS/" style="font-size: 12.5px;">macOS</a> <a href="/tags/éšè®°/" style="font-size: 10px;">éšè®°</a>
    			</div>
    	</section>
    

    
    	<section class="tools-section tools-section-friends">
  		
  			<div class="friends-wrap" id="js-friends">
  			
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://onevcat.com/#blog">ç‹å·åšå®¢</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.devtang.com/">å”å·§åšå®¢</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.liaoxuefeng.com/">å»–é›ªå³°çš„å®˜æ–¹ç½‘ç«™</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.skyfox.org/">å¤©ç‹åšå®¢</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.kittenyang.com/">Kittenåšå®¢</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.limboy.me/">æå¿ (è˜‘è‡è¡—)åšå®¢</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://blog.sunnyyoung.net/">Sunnyyoungåšå®¢</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://objccn.io/">ObjCä¸­å›½</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://nshipster.cn/">NSHipster</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://es6.ruanyifeng.com/">é˜®ä¸€å³°ECMAScript6å…¥é—¨</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://git-scm.com/book/zh/v2/">Git Document</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://tinypng.com/">å›¾ç‰‡åœ¨çº¿å‹ç¼©</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.cockos.com/licecap/">å±å¹•å½•åˆ¶GIF</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://developer.apple.com/library/">Apple Developer</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://developer.apple.com/app-store/review/guidelines/cn/">App Store å®¡æ ¸æŒ‡å—</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://developers.google.cn/">Google Developer</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.iconfont.cn/">é˜¿é‡Œå·´å·´çŸ¢é‡å›¾æ ‡åº“</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="http://www.nsdateformatter.com/">NSDateæ—¥æœŸæ ¼å¼</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://developer.apple.com/support/app-store/">iOSç‰ˆæœ¬åˆ†å¸ƒæƒ…å†µ</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://bugly.qq.com/docs/user-guide/symbol-configuration-ios/?v=20170627170213">iOSç¬¦å·è¡¨</a>
  	        
  	          <a target="_blank" class="main-nav-link switch-friends-link" href="https://developer.apple.com/library/content/documentation/DeviceInformation/Reference/iOSDeviceCompatibility/Displays/Displays.html#//apple_ref/doc/uid/TP40013599-CH108-SW6">iPhoneå°ºå¯¸</a>
  	        
  	        </div>
  		
    	</section>
    

    
    	<section class="tools-section tools-section-me">
  	  	
  	  		<div class="aboutme-wrap" id="js-aboutme">æˆ‘æ˜¯å´å“è¯šï¼Œæˆ‘å–‚è‡ªå·±è¢‹ç›......</div>
  	  	
    	</section>
    
  </div>
  
</div>
    <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>
  </div>
</body>
</html>