---
title: 博客搬迁至阿里云
tags:
  - Other
abbrlink: eeaff09f
date: 2018-04-17 12:31:07
---

### 前因

清明假期前，收到阿里云发来的邮件，说我的域名未指向阿里云国内节点（不含香港）服务器，根据工信部相关法规规定属于空壳网站，需要我尽快处理，否则将删除网站备案接入信息，甚至网站备案号有可能会被注销。

![email](/images/201804/A6E70FA52B0EF01384ABB896690F28D8.png)

> 我的域名之前确实是指向了国外服务器，我在 GitHub 通过 pages 服务搭建了一个 hexo 博客，并通过 CNAME 解析将域名绑定到了 GitHub pages 上

收到邮件当天，我就将 hexo 博客从 GitHub 迁移到了[码云](https://gitee.com)上，后来发现码云无法绑定域名，遂将博客继续搬迁到了[Coding](https://coding.net)上，然后绑定了我的域名并修改了域名解析，将域名指向了 Coding Pages；至此，我心想Coding.net毕竟是国内公司，我把博客托管至它提供的服务器上，应该没事了吧。

### 后果

不曾想，几个工作日后，在4月9日收到工信部备案系统发来的短信，说我的网站备案号`粤ICP备15020585`已被收回，网站信息被注销了，域名也访问不了了。

容我悲伤一会 :(

### 痛定思痛

发现将博客托管在第三方提供的服务器上已无望，没办法，只好花点软妹币购买阿里云的服务器了。在经过两天的思量后（其实还不是因为穷），花了RMB199软妹币购买了阿里云的`弹性Web托管`服务。

接下来就是重新备案了，这个没什么好说的，先进入弹性Web托管控制台，然后去申请一个备案服务号，然后拿着这个备案服务号去申请备案，填写网站基本信息，上传资料，提交审核。一周左右，我的备案就通过了。

### 重新上线我的博客

服务器买好了，备案也审核通过了，下面就开始将我的博客重新上线了。

- 上传博客内容文件

hexo 博客生成的静态页面，全部存储在 `public` 目录下，我们只需将该目录下的文件上传到服务器的 `htdocs` 目录下即可。除了用FTP软件上传之外，还可以通过 hexo 提供的[一键部署](https://hexo.io/zh-cn/docs/deployment.html#FTPSync)功能，将网站部署到服务器上。

- 绑定域名

进入弹性Web托管控制台，分别绑定 `www.0daybug.com`、 `0daybug.com`

- [域名解析](https://help.aliyun.com/knowledge_detail/39903.html?spm=5176.8848835.103.1.4acf49c3l9xrco)

进入域名解析控制台，添加如下两条域名解析，其中记录值为弹性Web托管中的测试域名

| 记录类型 | 主机记录 | 解析线路(isp) | 记录值 |
| :-: | :-: | :-: | :-: |
| CNAME | @ | 默认 | ew-*********.aliapp.com |
| CNAME | www | 默认 | ew-*********.aliapp.com |

至此，我的博客又重新上线了~~~
