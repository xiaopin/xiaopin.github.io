---
title: åŸºäºé˜¿é‡Œäº‘ OSS æ­å»º hexo åšå®¢
tags:
  - Other
abbrlink: 62f4282a
date: 2019-03-26 14:25:28
---

æ—¶é—´è¿‡çš„çœŸå¿«ï¼Œè½¬çœ¼`å¼¹æ€§Webæ‰˜ç®¡`æœåŠ¡ä¹Ÿå³å°†åˆ°æœŸäº†ï¼Œä½†æ˜¯æ¯å¹´ RMB199 çš„è´¹ç”¨ç¡®å®æœ‰ç‚¹é«˜äº†ï¼Œæ‰€ä»¥ä»Šå¹´ä¸æ‰“ç®—ç»­è´¹äº†ï¼Œè½¬æˆ˜ OSSã€‚

OSS çš„è®¡è´¹æ–¹å¼åˆ†ä¸º [æŒ‰é‡ä»˜è´¹](https://help.aliyun.com/document_detail/48266.html?spm=5176.208357.1107607.11.1a66390fBar6bt) å’Œ [åŒ…å¹´åŒ…æœˆ](https://help.aliyun.com/document_detail/48272.html?spm=a2c4g.11186623.6.552.ca985cdacROGX2) ä¸¤ç§æ–¹å¼ï¼Œç”±äºæœ¬ç«™è®¿é—®é‡å®åœ¨æ˜¯ä½ï¼Œæµé‡è´¹ç”¨ç®€ç›´å¯ä»¥è¯´æ˜¯å¿½ç•¥ä¸è®¡ï¼Œæ‰€ä»¥æˆ‘é‡‡ç”¨äº†æŒ‰é‡ä»˜è´¹çš„è®¡ä»·æ–¹å¼ã€‚

## å¼€é€š OSS æœåŠ¡ & æ–°å»º Bucket

- æ–°å»º Bucket

åœ¨æ§åˆ¶å°ä¸­æ‰“å¼€ `å¯¹è±¡å­˜å‚¨ OSS` é¢æ¿ï¼Œæ–°å»ºä¸€ä¸ª `Bucket`ï¼Œæ³¨æ„è¯»å†™æƒé™éœ€è¦è®¾ç½®ä¸º `å…¬å…±è¯»`

![png](/images/201903/create-bucket.png)

æ–°å»ºåä¼šåœ¨å·¦ä¾§é¢æ¿å‡ºç°ä½ æ–°å»ºçš„ Bucketï¼Œç‚¹å‡»è¿›å…¥è¯¥ Bucket çš„è¯¦æƒ…ã€‚

- é…ç½®é™æ€ç½‘é¡µæ‰˜ç®¡

è¿™æ˜¯[æ–‡æ¡£è¯´æ˜](https://help.aliyun.com/document_detail/31872.html)ï¼Œæœ‰å…´è¶£ä½ å¯ä»¥è‡ªè¡Œå»æŸ¥é˜…ã€‚ä¸è¿‡è¯´äº†é‚£ä¹ˆå¤šï¼Œå°±æ˜¯åœ¨ `åŸºç¡€è®¾ç½®--é™æ€é¡µé¢` ä¸­è®¾ç½®é¦–é¡µå’Œ404é¡µé¢çš„æ–‡ä»¶ã€‚

![png](/images/201903/static-page-setting.png)

- ç»‘å®šè‡ªå®šä¹‰åŸŸå

æ–‡æ¡£æˆ³[è¿™é‡Œ](https://help.aliyun.com/document_detail/31836.html?spm=a2c4g.11186623.4.3.71043cccPsN2Hk)

æ–°å»ºäº† Bucket åï¼Œä¼šæä¾›ä¸€ä¸ªé»˜è®¤çš„å¯¹å¤–è®¿é—®åŸŸåï¼Œæ ¼å¼ï¼šBucketåç§° + Endpointï¼Œå¦‚ `bucket-name.oss-cn-shenzhen.aliyuncs.com`ã€‚ä½†æ˜¯ä¸ºäº†ä¾¿äºè®¿é—®ï¼Œæˆ‘ä»¬å¯ä»¥å°†è‡ªå·±çš„åŸŸåç»‘å®šåˆ° Bucketï¼Œç›´æ¥é€šè¿‡è‡ªå·±çš„åŸŸåæ¥è®¿é—®èµ„æºã€‚

![png](/images/201903/bind-domain.png)

å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œæ³¨æ„*ä¸»åŸŸåå’Œ www åŸŸåéœ€è¦åˆ†åˆ«ç»‘å®š*ã€‚

## ä¸Šä¼ æ–‡ä»¶

æ§åˆ¶å°æä¾›äº†ä¸Šä¼ æ–‡ä»¶çš„é€‰é¡¹ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç½‘é¡µä¸Šä¼ æ–‡ä»¶ï¼Œä½†æ˜¯ä¸å»ºè®®ä½¿ç”¨è¯¥åŠŸèƒ½ï¼Œå› ä¸ºä¸å¥½ç”¨ğŸ˜‚ã€‚å¦‚æœæœ‰éœ€è¦ä½ ä¹Ÿå¯ä»¥ä¸‹è½½ SDK è‡ªè¡Œä¸Šä¼ æ–‡ä»¶ï¼Œè¿™é‡Œæ¨èä¸‹è½½é˜¿é‡Œäº‘æä¾›çš„å›¾å½¢åŒ–å·¥å…·æ¥ç®¡ç†æ–‡ä»¶ã€‚

- ä¸‹è½½ [oss-browser](https://help.aliyun.com/document_detail/61872.html?spm=a2c4g.11186623.2.10.8bb6744e9b6EQN)

- è·å– AccessKeyId å’Œ AccessKeySecret

ç‚¹å‡»å¤´åƒæ‰“å¼€ä¸‹æ‹‰èœå•ï¼Œé€‰æ‹© accesskeys é€‰é¡¹ï¼Œè¿›å…¥å®‰å…¨ä¿¡æ¯ç®¡ç†é¢æ¿ï¼Œç‚¹å‡» `åˆ›å»ºAccessKey` æŒ‰é’®ï¼Œ

![png](/images/201903/dropmenu.png)

![png](/images/201903/create-access-key.png)

ç³»ç»Ÿä¼šè‡ªåŠ¨ä¸ºæˆ‘ä»¬åˆ›å»º AccessKeyId å’Œ AccessKeySecretï¼Œç‚¹â€œä¿å­˜AKä¿¡æ¯â€ï¼Œå¯å°† `.csv` ç»“å°¾çš„æ–‡ä»¶ä¸‹è½½åˆ°ç”µè„‘ï¼Œæ‰“å¼€è¯¥æ–‡ä»¶å³å¯çœ‹è§æˆ‘ä»¬çš„ AccessKeyId å’Œ AccessKeySecretï¼Œå¦‚ä¸‹å›¾ï¼š

![png](/images/201903/saveak.jpg)

é€šè¿‡ AccessKeyId å’Œ AccessKeySecret æˆ‘ä»¬å°±å¯ä»¥ç”¨ OSS-Browser å·¥å…·ç™»å½•åˆ° OSSï¼Œç„¶åå¯ä»¥è¿›è¡Œä¸Šä¼ ã€åˆ é™¤ç­‰ç­‰æ“ä½œã€‚

ä¸Šé¢çš„ä¾‹å­æˆ‘æ˜¯ç›´æ¥ä½¿ç”¨äº†é˜¿é‡Œäº‘è´¦å·æ¥åˆ›å»º AccessKeyï¼Œè¿™ä¸æ˜¯æ¨èçš„åšæ³•ï¼Œé˜¿é‡Œäº‘æ¨èçš„æ˜¯é‡‡ç”¨RAMå­è´¦æˆ·åˆ›å»º AccessKey æ¥è¿›è¡Œè®¿é—®ï¼Œæ›´å¤šå…³äº RAM çš„ä½¿ç”¨è¯´æ˜è¯·è‡ªè¡ŒæŸ¥é˜…ã€‚

å…³äº OSS-Browser å·¥å…·çš„ç™»å½•æ•™ç¨‹è¯·[ç‚¹å‡»è¿™é‡Œ](https://www.aliyunbaike.com/oss/2883/)ã€‚


## ä¿®æ”¹ hexo URL è§„åˆ™

ç”±äº OSS çš„èµ„æº URL éƒ½æ˜¯ä»¥ç»å¯¹è·¯å¾„çš„æ–¹å¼è¿›è¡Œè®¿é—®çš„ï¼Œè€Œ hexo ç”Ÿæˆçš„æ–‡ç« é“¾æ¥éƒ½æ˜¯ä¼ªé™æ€çš„ï¼Œä»è€Œå¯¼è‡´ä¸ç®¡ç‚¹å‡»ä»»ä½•é“¾æ¥éƒ½ä¼šæ˜¾ç¤ºé¦–é¡µå†…å®¹ï¼Œæ¯”å¦‚ä¹‹å‰çš„ä¸€ç¯‡æ–‡ç« åœ°å€ä¸ºï¼šhttp://www.0daybug.com/article/ ï¼Œåˆ™ç°åœ¨å¿…é¡»è¦åŠ ä¸Š index.html æ‰èƒ½è®¿é—®åˆ°è¯¥æ–‡ç« ï¼šhttp://www.0daybug.com/article/index.html ã€‚

å› æ­¤éœ€è¦ä¿®æ”¹ hexo ç”Ÿæˆæ–‡ç«  URL çš„è§„åˆ™ï¼Œéƒ¨åˆ†å¯ä»¥ç›´æ¥åœ¨ `_config.yml` é…ç½®æ–‡ä»¶ä¸Šç›´æ¥è¿›è¡Œé…ç½®ï¼Œè€Œæœ‰äº›åˆ™åªèƒ½é€šè¿‡ä¿®æ”¹ hexo ä»£ç æ¥å®Œæˆäº†ã€‚

- *hexo/_config.yml* ä¸­çš„ `permalink` é…ç½®é¡¹éœ€è¦æ·»åŠ  index.html ç»“å°¾
```bash
permalink: :year/:month/:day/:title/index.html
```

- hexo V5.2.0ä¿®æ”¹

  - ä¿®æ”¹æ ‡ç­¾çš„é“¾æ¥ï¼šnode_modules/hexo/lib/plugins/helper/tagcloud.js åœ¨70è¡Œä»£ç ä¸­æ‹¼æ¥ä¸Š index.html

  - ä¿®æ”¹æ–‡ç« è¯¦æƒ…å†…çš„æ ‡ç­¾é“¾æ¥ï¼š/node_modules/hexo/lib/plugins/helper/list_tags.js åˆ†åˆ«åœ¨55/71è¡Œä»£ç ä¸­æ‹¼æ¥ä¸Š index.html

  - ä¿®æ”¹é¦–é¡µåº•éƒ¨çš„åˆ†é¡µé“¾æ¥ï¼š/node_modules/hexo/lib/plugins/helper/paginator.js ä¿®æ”¹ `createLink` å‡½æ•°ï¼Œåœ¨ç¬¬8è¡Œä»£ç ä¸­æ‹¼æ¥ index.html

- hexo V3.8.0ä¿®æ”¹

  - ä¿®æ”¹æ ‡ç­¾çš„é“¾æ¥ï¼šnode_modules/hexo/lib/plugins/helper/tagcloud.js åœ¨227è¡Œä»£ç ä¸­æ‹¼æ¥ä¸Š index.html

  - ä¿®æ”¹æ–‡ç« è¯¦æƒ…å†…çš„æ ‡ç­¾é“¾æ¥ï¼š/node_modules/hexo/lib/plugins/helper/list_tags.js åˆ†åˆ«åœ¨40/56è¡Œä»£ç ä¸­æ‹¼æ¥ä¸Š index.html

  - ä¿®æ”¹é¦–é¡µåº•éƒ¨çš„åˆ†é¡µé“¾æ¥ï¼š/node_modules/hexo/lib/plugins/helper/paginator.js ä¿®æ”¹ `link` å‡½æ•°ï¼Œåœ¨28è¡Œä»£ç ä¸­æ‹¼æ¥ index.html

> é’ˆå¯¹ä¿®æ”¹ hexo æºç çš„é—®é¢˜ï¼Œç”±äºä½¿ç”¨ä¸åŒçš„ä¸»é¢˜ä¼šæœ‰æ‰€ä¸åŒï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µè¿›è¡Œä¿®æ”¹å³å¯ã€‚ä¸Šé¢çš„ä¿®æ”¹é’ˆå¯¹é»˜è®¤ä¸»é¢˜æœ‰æ•ˆã€‚

## æ°¸ä¹…é“¾æ¥

ä¸Šé¢ä¸­é€šè¿‡æŒ‡å®š `permalink` ä¸º `:year/:month/:day/:title/index.html` å·²ç»ä¿®æ”¹äº†æ°¸ä¹…é“¾æ¥çš„ç”Ÿæˆæ ¼å¼ï¼Œä½†æ˜¯è¿™ç§æ ¼å¼ç›®å½•å¤ªæ·±äº†ï¼Œå¹¶ä¸”æ ‡é¢˜æ˜¯ä¸­æ–‡çš„è¯URLä¸­ä¹Ÿä¼šå‡ºç°ä¸­æ–‡ï¼Œæ‰€ä»¥éœ€è¦æ”¹è¿›ä¸€ä¸‹ç”Ÿæˆçš„æœ€ç»ˆé“¾æ¥æ ¼å¼ã€‚

- å®‰è£… hexo-abbrlink æ’ä»¶
```
npm install hexo-abbrlink --save
```

- ä¿®æ”¹é…ç½®æ–‡ä»¶ _config.yml
```
permalink: posts/:abbrlink/index.html
# hexo-abbrlink æ’ä»¶é…ç½®(ç”¨äºç”Ÿæˆå”¯ä¸€çš„æ°¸ä¹…é“¾æ¥)
abbrlink:
    alg: crc32 # ç®—æ³•ï¼šcrc16(default) and crc32
    rep: hex # è¿›åˆ¶ï¼šdec(default) and hex
```

- é‡æ–°æ‰“åŒ…
```
hexo clean
hexo g
```

æ‰“åŒ…ç”Ÿæˆåä½ ä¼šå‘ç°åŸæ¥çš„æ–‡ç« mdæ–‡ä»¶å·²ç»æ·»åŠ äº† `abbrlink` å­—æ®µï¼Œå€¼ä¸ºå¯¹åº”çš„å”¯ä¸€IDï¼Œæ‰€ä»¥èƒ½å¤Ÿç¡®ä¿æˆ‘ä»¬ä¿®æ”¹æ ‡é¢˜ã€æ–‡ç« å†…å®¹ç­‰ä¸ä¼šæ”¹å˜æœ€ç»ˆçš„æ–‡ç« é“¾æ¥ã€‚

## HTTPS

OSS æ”¯æŒ HTTPS è®¿é—®ï¼Œå¦‚æœä½ çš„åŸŸåæ˜¯åœ¨ä¸‡ç½‘ä¸Šé¢è´­ä¹°çš„ï¼Œåˆ™å¯ä»¥ç”³è¯·é˜¿é‡Œäº‘çš„å…è´¹ HTTPS è¯ä¹¦ã€‚

æ‰“å¼€ `åŸŸå` æ§åˆ¶å°ï¼Œæ‰¾åˆ°ä½ çš„åŸŸåï¼Œç‚¹å‡»åé¢çš„ `ç®¡ç†` æŒ‰é’®è¿›å…¥åŸŸåçš„åŸºæœ¬ä¿¡æ¯é¡µé¢ï¼Œé¡µé¢ä¸Šæœ‰ä¸ª `å¼€å¯å…è´¹SSLè¯ä¹¦` çš„é“¾æ¥ï¼Œç‚¹å‡»å³å¯è¿›å…¥ç”³è¯·å…è´¹ SSL è¯ä¹¦çš„ç•Œé¢ï¼Œæ ¹æ®ä½ çš„éœ€æ±‚è¯·è‡ªè¡Œç”³è¯· SSL è¯ä¹¦ã€‚

æ‰“å¼€ `SSL è¯ä¹¦ï¼ˆåº”ç”¨å®‰å…¨ï¼‰` æ§åˆ¶å°ï¼Œå¯ä»¥çœ‹åˆ°ä½ çš„ SSL è¯ä¹¦çš„çŠ¶æ€ï¼Œæ‰¾åˆ°å·²ç­¾å‘çš„è¯ä¹¦ï¼Œå°†å…¶ä¸‹è½½åˆ°ç”µè„‘å¤‡ç”¨ï¼ˆå†…å«å…¬é’¥ã€ç§é’¥ï¼‰ã€‚

æ‰“å¼€ `å¯¹è±¡å­˜å‚¨ OSS` æ§åˆ¶å°ï¼Œæ‰¾ä½ åŸŸåç®¡ç†ï¼ˆä¸Šé¢çš„ç»‘å®šè‡ªå®šä¹‰åŸŸåæœ‰æåˆ°ï¼‰ï¼Œç‚¹å‡»è¯ä¹¦æ‰˜ç®¡ï¼Œå°† SSL è¯ä¹¦çš„å…¬é’¥ã€ç§é’¥å¡«å¥½åæäº¤ä¿å­˜ï¼Œå³å¯å¼€å¯ HTTPS åŠŸèƒ½ã€‚

## è‡ªåŠ¨éƒ¨ç½²åˆ°OSS

å‰é¢å·²ç»æåˆ°å¯ä»¥ä½¿ç”¨ oss-browser å·¥å…·æ¥ä¸Šä¼ æ–‡ä»¶ï¼Œä½†æ˜¯æ¯æ¬¡éƒ½éœ€è¦è‡ªå·±æ‰‹åŠ¨ä¸Šä¼ ï¼Œæœ‰ç‚¹ç¹çï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°±çœ‹ä¸‹å¦‚ä½•è¿›è¡Œè‡ªåŠ¨éƒ¨ç½²ã€‚

- å®‰è£… `hexo-deployer-ali-oss` åº“

```shell
npm i hexo-deployer-ali-oss
```

- é…ç½®é¡¹ç›® `_config.yml` æ–‡ä»¶ï¼Œæ·»åŠ è‡ªåŠ¨éƒ¨ç½²çš„ä¿¡æ¯

```
deploy:
  type: ali-oss # å›ºå®šå€¼
  region: oss-cn-shenzhen # OSSåŒºåŸŸä»£ç 
  accessKeyId: # é˜¿é‡Œäº‘è´¦å·çš„ AccessKey ID
  accessKeySecret: # é˜¿é‡Œäº‘è´¦å·çš„ AccessKey Secret
  bucket: # bucketçš„åç§°
  #remotePath: # é»˜è®¤æƒ…å†µä¸‹å°†éƒ¨ç½²åœ¨ bucket æ ¹ç›®å½•ä¸‹
```

> æ³¨æ„ä¿ç®¡å¥½ä½ çš„ accessKeyId å’Œ accessKeySecretï¼Œè¯·å‹¿æ³„æ¼ï¼ï¼ï¼

- æ‰§è¡Œéƒ¨ç½²

```shell
hexo clean && hexo d
```


å‚è€ƒï¼š
- [æ•™ç¨‹ç¤ºä¾‹ï¼šä½¿ç”¨è‡ªå®šä¹‰åŸŸåè®¾ç½®é™æ€ç½‘ç«™æ‰˜ç®¡](https://help.aliyun.com/document_detail/67323.html?spm=a2c4g.11186623.4.1.71043ccc1h11YJ)
- [é™æ€ç½‘ç«™æ‰˜ç®¡ä»‹ç»](https://help.aliyun.com/document_detail/31872.html?spm=a2c4g.11186623.6.646.71043cccMNtliW)
- [è®¾ç½®é™æ€ç½‘ç«™æ‰˜ç®¡](https://help.aliyun.com/document_detail/31899.html?spm=a2c4g.11186623.2.13.72df3ccc5fa6sJ#concept-ars-bhz-5db)
- [ä½¿ç”¨é˜¿é‡Œäº‘OSSå®‰è£…é™æ€ç½‘ç«™æ•™ç¨‹](https://www.aliyunbaike.com/oss/2614/)
